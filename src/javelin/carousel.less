//
// Javelin: Carousel Module
// ----------------------------------------------------------------------------------------------------


// Fix the module UI layering in Javelin
.javelin-fix-module-ui(carousel);


// Module Container
.cms-carousel {
    margin-left: auto;
    margin-right: auto;
    position: relative;
}


// Slides
.cms-carousel-inner {
    height: 100%;
    margin-left: auto;
    margin-right: auto;
    position: relative;
    z-index: 10 !important;
}

.cms-carousel-slide {
    &:extend(.border-box-sizing all);
    
    width: 100%;
    height: 100%;
    display: none; // hidden by default
    
    .cms-carousel-rotator & {
        padding-left: floor(@grid-gutter-width / 2);
        padding-right: floor(@grid-gutter-width / 2);
        position: relative !important; // needs !important to override inline style from the Cycle2 Carousel plugin
    }
}

.cms-carousel-media {
    width: 100%;
    height: 100%;
    background-position: center;
    background-repeat: no-repeat;
    background-size: cover;
    position: relative;
    z-index: 10 !important;
    
    img {
        .img-cover();
        
        margin-left: auto;
        margin-right: auto;
    }
    
    // NOTE: Originally, we tried to incorporate videos as well but this presented an even greater
    // challenge in how the admin interface should display. Worse than that, the video features
    // could not fully function on mobile devices. With this realization, we chose to not support
    // videos in the carousel module.
}

.cms-carousel-text {
    color: @carousel-text-color;
    line-height: @carousel-text-line-height;
    position: absolute;
    z-index: 30 !important;
    
    & when (iscolor(@carousel-text-shadow-color)) {
        text-shadow: 0 1px 2px fade(@carousel-text-shadow-color, 60%);
    }
    
    // Vertical Alignment
    &.top {
        top: 40px;
    }
    
    &.bottom {
        bottom: 40px;
    }

    &.middle {
        // We actually can't use CSS to center the text perfectly, so we position it 1/4 from the top
        top: 25%;
    }
    
    // Horizontal Alignment
    &.left {
        left: 15%;
        right: 50%;
    }
    
    &.right {
        text-align: right;
        left: 50%;
        right: 15%;
    }
    
    &.center {
        text-align: center;
        left: 15%;
        right: 15%;
    }
}

.cms-carousel-title {
    color: inherit;
}

.cms-carousel-link {
    margin-bottom: 20px;
    color: inherit;
}

.cms-carousel-overlay {
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    z-index: 20 !important;
}


// Previous and Next Controls
.cms-carousel-next,
.cms-carousel-prev {
    width: 15%;
    color: @carousel-prevnext-arrow-color;
    text-align: center;
    cursor: pointer;
    position: absolute;
    top: 0;
    bottom: 0;
    z-index: 30 !important;
}

.cms-carousel-arrow {
    width: @carousel-prevnext-arrow-width;
    height: @carousel-prevnext-arrow-height;
    margin-top: -(floor(@carousel-prevnext-arrow-height / 2));
    background-size: @carousel-prevnext-arrow-width @carousel-prevnext-arrow-height;
    line-height: 1;
    display: inline-block;
    position: absolute;
    top: 50%;
}

.cms-carousel-prev {
    left: 0;
    
    & when (iscolor(@carousel-prevnext-fade-color)) {
        #gradient.horizontal(fade(@carousel-prevnext-fade-color, 50%), fade(@carousel-prevnext-fade-color, 0%));
    }
    
    .cms-carousel-arrow {
        margin-left: -(floor(@carousel-prevnext-arrow-width / 2));
        background-image: url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4KPCEtLSBHZW5lcmF0b3I6IEFkb2JlIElsbHVzdHJhdG9yIDE4LjEuMSwgU1ZHIEV4cG9ydCBQbHVnLUluIC4gU1ZHIFZlcnNpb246IDYuMDAgQnVpbGQgMCkgIC0tPgo8IURPQ1RZUEUgc3ZnIFBVQkxJQyAiLS8vVzNDLy9EVEQgU1ZHIDEuMS8vRU4iICJodHRwOi8vd3d3LnczLm9yZy9HcmFwaGljcy9TVkcvMS4xL0RURC9zdmcxMS5kdGQiPgo8c3ZnIHZlcnNpb249IjEuMSIgaWQ9IkNoZXZyb25fdGhpbl9sZWZ0IiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB4PSIwcHgiCgkgeT0iMHB4IiB2aWV3Qm94PSIwIDAgMjAgMjAiIGVuYWJsZS1iYWNrZ3JvdW5kPSJuZXcgMCAwIDIwIDIwIiB4bWw6c3BhY2U9InByZXNlcnZlIj4KPHBhdGggZmlsbD0iI0ZGRkZGRiIgZD0iTTEzLjg5MSwxNy40MThjMC4yNjgsMC4yNzIsMC4yNjgsMC43MDksMCwwLjk3OWMtMC4yNjgsMC4yNy0wLjcwMSwwLjI3MS0wLjk2OSwwbC03LjgzLTcuOTA4CgljLTAuMjY4LTAuMjctMC4yNjgtMC43MDcsMC0wLjk3OWw3LjgzLTcuOTA4YzAuMjY4LTAuMjcsMC43MDEtMC4yNywwLjk2OSwwYzAuMjY4LDAuMjcxLDAuMjY4LDAuNzA5LDAsMC45NzlMNi43NSwxMEwxMy44OTEsMTcuNDE4Cgl6Ii8+Cjwvc3ZnPg==);
        left: 50%;
    }
}

.cms-carousel-next {
    right: 0;
    
    & when (iscolor(@carousel-prevnext-fade-color)) {
        #gradient.horizontal(fade(@carousel-prevnext-fade-color, 0%), fade(@carousel-prevnext-fade-color, 50%));
    }
    
    .cms-carousel-arrow {
        margin-right: -(floor(@carousel-prevnext-arrow-width / 2));
        background-image: url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4KPCEtLSBHZW5lcmF0b3I6IEFkb2JlIElsbHVzdHJhdG9yIDE4LjEuMSwgU1ZHIEV4cG9ydCBQbHVnLUluIC4gU1ZHIFZlcnNpb246IDYuMDAgQnVpbGQgMCkgIC0tPgo8IURPQ1RZUEUgc3ZnIFBVQkxJQyAiLS8vVzNDLy9EVEQgU1ZHIDEuMS8vRU4iICJodHRwOi8vd3d3LnczLm9yZy9HcmFwaGljcy9TVkcvMS4xL0RURC9zdmcxMS5kdGQiPgo8c3ZnIHZlcnNpb249IjEuMSIgaWQ9IkNoZXZyb25fdGhpbl9yaWdodCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIgeD0iMHB4IgoJIHk9IjBweCIgdmlld0JveD0iMCAwIDIwIDIwIiBlbmFibGUtYmFja2dyb3VuZD0ibmV3IDAgMCAyMCAyMCIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSI+CjxwYXRoIGZpbGw9IiNGRkZGRkYiIGQ9Ik0xMy4yNSwxMEw2LjEwOSwyLjU4Yy0wLjI2OC0wLjI3LTAuMjY4LTAuNzA3LDAtMC45NzljMC4yNjgtMC4yNywwLjcwMS0wLjI3LDAuOTY5LDBsNy44Myw3LjkwOAoJYzAuMjY4LDAuMjcxLDAuMjY4LDAuNzA5LDAsMC45NzlsLTcuODMsNy45MDhjLTAuMjY4LDAuMjcxLTAuNzAxLDAuMjctMC45NjksMGMtMC4yNjgtMC4yNjktMC4yNjgtMC43MDcsMC0wLjk3OUwxMy4yNSwxMHoiLz4KPC9zdmc+);
        right: 50%;
    }
}


// Pager
.cms-carousel-pager {
    width: 60%;
    margin: 0 0 0 -30%;
    line-height: 1;
    text-align: center;
    position: absolute;
    left: 50%;
    bottom: 20px;
    z-index: 20 !important;
    list-style: none;
    
    li {
        .text-hide();
        
        & when (@component-animations = true) {
            .transition(~"background-color @{animation-duration-base} @{animation-timing-function-base}, border-color @{animation-duration-base} @{animation-timing-function-base}");
        }
        
        width: @carousel-pager-item-size;
        height: @carousel-pager-item-size;
        margin: 1px (@carousel-pager-item-offset-horz + 1);
        background-color: @carousel-pager-item-bg;
        border: @carousel-pager-item-border;
        border-radius: 50%;
        vertical-align: middle;
        cursor: pointer;
        display: inline-block;
        list-style: none;
        
        &:hover {
            & when (iscolor(@carousel-pager-item-hover-bg)) {
                background-color: @carousel-pager-item-hover-bg;
            }
            
            & when (iscolor(@carousel-pager-item-hover-border-color)) {
                border-color: @carousel-pager-item-hover-border-color;
            }
        }
        
        &.active {
            width: (@carousel-pager-item-size + 2);
            height: (@carousel-pager-item-size + 2);
            margin: 0 @carousel-pager-item-offset-horz;
            
            & when (iscolor(@carousel-pager-item-active-bg)) {
                background-color: @carousel-pager-item-active-bg;
            }
            
            & when (iscolor(@carousel-pager-item-active-border-color)) {
                border-color: @carousel-pager-item-active-border-color;
            }
        }
    }
}